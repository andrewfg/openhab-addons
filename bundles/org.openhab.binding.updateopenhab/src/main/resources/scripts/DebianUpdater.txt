#!/bin/sh

# OpenHAB Auto Update Script for Linux / Debian

# Execute command: [EXECUTE_COMMAND]

# redirect outputs
exec 1>[STD_OUT_FILENAME]
exec 2>&1

# ignore SIGTERM so this script isn't killed when OpenHAB shuts down
trap "" 15

# stop OpenHAB
systemctl stop openhab.service

# set repository
echo "deb https://openhab.jfrog.io/artifactory/openhab-linuxpkg [TARGET_TYPE] main" > /etc/apt/sources.list.d/openhab.list

# update OpenHAB
apt-get update
apt-get install openhab

# start OpenHAB
systemctl start openhab.service
